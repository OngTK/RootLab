drop database if exists testProject;
create database testProject;
use testProject;

CREATE TABLE Users (							
  userNo     		INT UNSIGNED NOT NULL AUTO_INCREMENT,	-- 사용자번호 PK
  email      		VARCHAR(40)  NOT NULL UNIQUE,			-- 이메일 UNIQUE
  -- passwordHash		VARCHAR(60)  NOT NULL,      			-- 해시화 비밀번호 (해시화를 위한 varchar 길이 60으로 수정) csv 파일처리 했음
  userName     		VARCHAR(20)  NOT NULL,					-- 이름 
  userPhone     	VARCHAR(15)  NOT NULL UNIQUE, 			-- 폰번호 UNIQUE
  userStatus		int			not null default 1,			--  유저 상태 0 삭제 1 활성
  roadAddress   	text NOT NULL,					-- 도로명 주소
  detailAddress 	VARCHAR(100) NOT NULL,					-- 상세 주소
  createDate 		DATETIME     NOT NULL default now(),	-- 가입일
  updateDate 		DATETIME NOT NULL DEFAULT NOW() ON UPDATE NOW(),		 -- 변경 날짜
  CONSTRAINT PRIMARY KEY (userNo)							-- PK
) ENGINE=InnoDB AUTO_INCREMENT=1000001; -- PK 1000001부터 시작

/* =========================================================
 * 1-2) BusinessUser table
 * 사업자 등록 번호를 입력한 [기업 담당자]의 USER TABLE 외 추가 정보 테이블
 * ========================================================= */
CREATE TABLE BusinessUser (	
  bnNo  	 VARCHAR(30)  NOT NULL,  			-- 사업자등록번호 예: '123-45-67890' UNIQUE , primary key 
  bnName    	 VARCHAR(100) NOT NULL,				-- 기업명 
  managerName    VARCHAR(50)  NOT NULL,				-- 담당자명
  managerPhone   VARCHAR(20)  NOT NULL UNIQUE,		-- 담당자번호 
  bnDocuImg  	 varchar(250) NOT NULL,  			-- 사업자이미지 예: '/img/docs/alpha.png'
  bnType   		 VARCHAR(50)  NOT NULL,  			-- 업태
  bnStatus		 int NOT NULL DEFAULT 1,                 				-- 활성/비활성 삭제시에는 delete 사용. 0 은 비활성 1 은 활성
  bnItem   		 VARCHAR(50)  NOT NULL,  			-- 종목
  userNo         INT UNSIGNED NOT NULL,  			-- FK(User)	UNSIGNED -> INT 음수값 없애고 양수값만 두 배로 범위
  createDate 		DATETIME     NOT NULL default now(),	-- 가입일
  updateDate 		DATETIME NOT NULL DEFAULT NOW() ON UPDATE NOW(),		 -- 변경 날짜
  CONSTRAINT PRIMARY KEY (bnNo),				-- primary key 
  CONSTRAINT 
    FOREIGN KEY (userNo) REFERENCES Users(userNo)	-- 참조 FK
) ENGINE=InnoDB;

/* =========================================================
 * 2-1) RoleTemplate table
 * 역할 템플릿 헤더(역할군의 묶음)
 * ========================================================= */
CREATE TABLE RoleTemplate (
  rtNo 				INT UNSIGNED PRIMARY KEY AUTO_INCREMENT,   				-- 역할 템플릿 식별자 부분 PK
  bnNo 			VARCHAR(30) not null,                             		-- 이 템플릿을 소유/배포하는 사업자 식별 FK
  rtName    		VARCHAR(120) NOT NULL,                         			-- 템플릿 이름 (예: "콘서트_기본_역할군_v1")
  rtDescription    	longtext NULL,                             					-- 템플릿 설명부분
  rtStatus   		int NOT NULL DEFAULT 1,                 				-- 활성/비활성 삭제시에는 delete 사용. 0 은 비활성 1 은 활성
  createDate  		DATETIME NOT NULL DEFAULT NOW(),						-- 생성 날짜
  updateDate 		DATETIME NOT NULL DEFAULT NOW() ON UPDATE NOW(),		 -- 변경 날짜
  CONSTRAINT 
    FOREIGN KEY (bnNo) REFERENCES BusinessUser(bnNo)
) ENGINE=InnoDB AUTO_INCREMENT=2000001; 	


INSERT INTO Users (userNo, email, userName, userPhone, roadAddress, detailAddress, userStatus, createDate, updateDate) VALUES
(1000001, 'mx2ur43n@example.com', '김민수', '010-5636-0000', '인천광역시 남동구 인하로 100', '923호', 1, '2025-06-01 00:00:00', '2025-06-01 00:00:00'), -- bn 하늘정보기획
(1000002, 'ahrqigta@example.com', '이서연', '010-7079-0000', '인천광역시 연수구 송도과학로 16', '479호', 1, '2025-06-01 00:00:00', '2025-06-07 00:00:00'), -- bn 푸른기획
(1000003, '9wnitcn0@example.com', '박지훈', '010-7145-0000', '인천광역시 부평구 경원대로 123', '131호', 1, '2025-06-01 00:00:00', '2025-06-07 00:00:00'),
(1000004, 'je82aj2j@example.com', '최유진', '010-1173-0000', '인천광역시 서구 검단로 113', '332호', 1, '2025-06-02 00:00:00', '2025-06-10 00:00:00'),
(1000005, 'k51v9qj5@example.com', '정하늘', '010-8237-0000', '인천광역시 미추홀구 석바위로 45', '358호', 1, '2025-06-02 00:00:00', '2025-06-14 00:00:00'), -- bn 빛나는 컴퍼니
(1000006, 'ux3y4vpb@example.com', '윤지호', '010-4214-0000', '인천광역시 동구 화도진로 77', '232호', 1, '2025-06-02 00:00:00', '2025-06-22 00:00:00'),
(1000007, '81hgmkcr@example.com', '장예린', '010-2805-0000', '경기도 부천시 길주로 210', '827호', 1, '2025-06-03 00:00:00', '2025-06-24 00:00:00'),
(1000008, 'na63gnjj@example.com', '한도윤', '010-2812-0000', '경기도 부천시 부천로 123', '981호', 1, '2025-06-03 00:00:00', '2025-07-03 00:00:00'),
(1000009, '1ghlv1ud@example.com', '오지민', '010-4344-0000', '경기도 부천시 소사로 88', '623호', 1, '2025-06-04 00:00:00', '2025-07-04 00:00:00'),
(1000010, 'iey28ret@example.com', '신유나', '010-8772-0000', '경기도 부천시 중동로 55', '792호', 1, '2025-06-04 00:00:00', '2025-07-08 00:00:00'),
(1000011, '1cxcst89@example.com', '홍지훈', '010-9301-0000', '경기도 부천시 오정로 99', '746호', 1, '2025-06-04 00:00:00', '2025-07-08 00:00:00'),
(1000012, 'j0vacbxq@example.com', '강민지', '010-9526-0000', '경기도 부천시 상동로 66', '420호', 1, '2025-06-05 00:00:00', '2025-07-16 00:00:00'),
(1000013, 'dki7lg08@example.com', '배수현', '010-6505-0000', '인천광역시 계양구 계산로 101', '487호', 1, '2025-06-05 00:00:00', '2025-07-23 00:00:00'),
(1000014, '1bzileof@example.com', '조예진', '010-9627-0000', '인천광역시 중구 신포로 33', '665호', 1, '2025-06-05 00:00:00', '2025-07-30 00:00:00'),
(1000015, 'kg7pdfxa@example.com', '임도현', '010-1749-0000', '인천광역시 강화군 강화대로 77', '251호', 1, '2025-06-06 00:00:00', '2025-08-01 00:00:00'),
(1000016, 'wg3yb2yt@example.com', '서지우', '010-4216-0000', '경기도 부천시 원미로 22', '951호', 1, '2025-06-07 00:00:00', '2025-08-08 00:00:00'),
(1000017, '5se2oa67@example.com', '문지훈', '010-1667-0000', '경기도 부천시 역곡로 11', '489호', 1, '2025-06-07 00:00:00', '2025-08-12 00:00:00'),
(1000018, 't32ytofo@example.com', '권민서', '010-7069-0000', '경기도 부천시 춘의로 44', '572호', 1, '2025-06-07 00:00:00', '2025-08-14 00:00:00'),
(1000019, '1u8it399@example.com', '안예준', '010-4189-0000', '인천광역시 남구 주안로 88', '390호', 1, '2025-06-08 00:00:00', '2025-08-14 00:00:00'),
(1000020, 'nlit1p5u@example.com', '남하늘', '010-1696-0000', '인천광역시 서구 청라대로 55', '334호', 1, '2025-06-08 00:00:00', '2025-08-17 00:00:00');

INSERT INTO BusinessUser (bnNo, bnName, managerName, managerPhone, bnDocuImg, bnType, bnItem, bnStatus, createDate, updateDate, userNo) VALUES
('100-00-00001', '하늘정보기술', '김하늘', '010-8708-0000', '사업자등록증1_sample.png', '지방자치단체', '지방자치단체', 1, '2025-06-01 00:00:00', '2025-06-01 00:00:00', 1000001),
('100-00-00002', '푸른기획', '이도윤', '010-8438-0000', '사업자등록증2_sample.png', '유통업', '식품', 1, '2025-06-01 00:00:00', '2025-06-07 00:00:00', 1000002),
('100-00-00003', '빛나는컴퍼니', '박예진', '010-3595-0000', '사업자등록증3_sample.png', '제조업', '전자기기', 1, '2025-06-02 00:00:00', '2025-06-14 00:00:00', 1000005);

/* 1) 대분류: RoleTemplate (bnNo 3곳에 맞춘 현실 카테고리) */
INSERT INTO RoleTemplate (rtNo, bnNo, rtName, rtDescription, rtStatus, createDate, updateDate) VALUES
-- [하늘정보기술 / 지방자치단체] : 운영·무대·조명·음향·의전/안내
(2000001, '100-00-00001', '현장운영',        '행사 전반 운영, 콜/무전, 러닝 관리',                                  1, '2025-06-07 09:00:00', '2025-06-07 09:00:00'),
(2000002, '100-00-00001', '무대(스테이지)',  '무대 설치·전환·안전 관리',                                            1, '2025-06-07 09:10:00', '2025-06-07 09:10:00'),
(2000003, '100-00-00001', '조명',            '조명 설계/오퍼레이션·리깅·전기',                                       1, '2025-06-07 09:20:00', '2025-06-07 09:20:00'),
(2000004, '100-00-00001', '음향',            'FOH·모니터·시스템 튜닝·RF 관리',                                       1, '2025-06-07 09:30:00', '2025-06-07 09:30:00'),
(2000005, '100-00-00001', '의전·안내',       'VIP 의전·리셉션/등록·좌석/동선 안내',                                  1, '2025-06-07 09:40:00', '2025-06-07 09:40:00'),

-- [푸른기획 / 유통·식품 프로모션] : 프로모션·MC·보안·촬영·영상송출
(2000006, '100-00-00002', '프로모션 운영',    '시식/시연·경품 이벤트·브랜드 부스 운영',                              1, '2025-06-08 09:00:00', '2025-06-08 09:00:00'),
(2000007, '100-00-00002', '진행/MC',         '메인/보조 MC·나레이터·큐콜러',                                        1, '2025-06-08 09:10:00', '2025-06-08 09:10:00'),
(2000008, '100-00-00002', '보안·안전',       '출입통제·순찰·비상대응·Crowd Safety',                                 1, '2025-06-08 09:20:00', '2025-06-08 09:20:00'),
(2000009, '100-00-00002', '촬영·기록',       '스틸·비디오·현장 편집·데이터 관리',                                   1, '2025-06-08 09:30:00', '2025-06-08 09:30:00'),
(2000010, '100-00-00002', '영상·송출',       '스위칭·LED 월·중계/송출·그래픽 오퍼레이트',                            1, '2025-06-08 09:40:00', '2025-06-08 09:40:00'),

-- [빛나는컴퍼니 / 제조·전자기기] : VIP의전·케이터링·쇼컨트롤·설치/철거·관객서비스·공연
(2000011, '100-00-00003', 'VIP 의전',        '의전 프로토콜·이동 동선·출입/보안 협조',                              1, '2025-06-09 09:00:00', '2025-06-09 09:00:00'),
(2000012, '100-00-00003', '케이터링',        '푸드/음료 스테이션·위생·백업 물류',                                    1, '2025-06-09 09:10:00', '2025-06-09 09:10:00'),
(2000013, '100-00-00003', '리허설·쇼컨트롤',  '쇼콜·큐시트·인터컴·타임키핑',                                          1, '2025-06-09 09:20:00', '2025-06-09 09:20:00'),
(2000014, '100-00-00003', '설치·철거(구조물)', '트러스/텐트/사인물 설치·해체·적재',                                   1, '2025-06-09 09:30:00', '2025-06-09 09:30:00'),
(2000015, '100-00-00003', '관객 서비스',      '티켓/팔찌·유실물·민원/CS·안내 데스크',                                1, '2025-06-09 09:40:00', '2025-06-09 09:40:00'),
(2000016, '100-00-00003', '공연/퍼포먼스',    '퍼포머 섭외·무대 운용·전환/안전 스포트',                               1, '2025-06-09 09:50:00', '2025-06-09 09:50:00');
